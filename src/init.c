//// Created by hadi on 1/24/19.//#include "globals_structs_const.h"int f, row = 0, col = 0;double times;struct bullet *bal_temp;tank extt[2];int rang;int menu() {    while (1) {        int choose = 0;        double times;        bool f;        while (1) {            int start_ticks = SDL_GetTicks();            times = (sin(start_ticks)) * (sin(start_ticks));            SDL_SetRenderDrawColor(renderer, 0, 0, 0, 255);            SDL_RenderClear(renderer);            SDL_Event event;            draw_map();            for (int i = 0; i < tank_num; i++)                if (tank1[i].alive) {                    draw_tank(i);                }            SDL_RenderSetScale(renderer, 2, 2);            thickLineRGBA(renderer, 80, 160, 300, 160, 150, 100, 100, 100, 150);            stringRGBA(renderer, 100, 180, "main menu", (choose != 1) * 255 + (choose == 1) * (122), 255, (choose != 1) * 255 + (choose == 1) * (times * 132 + 122), (choose != 1) * 255 + (choose == 1) * times * 255);            stringRGBA(renderer, 100, 160, "Resume", (choose != 0) * 255 + (choose == 0) * (122), 255, (choose != 0) * 255 + (choose == 0) * (times * 132 + 122), (choose != 0) * 255 + (choose == 0) * times * 255);            stringRGBA(renderer, 100, 100, "AtomTank!", 255, 255, 255, 255);            stringRGBA(renderer, 100, 200, "save game", (choose != 2) * 255 + (choose == 2) * (122), 255, (choose != 2) * 255 + (choose == 2) * (times * 132 + 122), (choose != 2) * 255 + (choose == 2) * times * 255);            stringRGBA(renderer, 100, 220, "exit", (choose != 3) * 255 + (choose == 3) * (122), 255, (choose != 3) * 255 + (choose == 3) * (times * 132 + 122), (choose != 3) * 255 + (choose == 3) * times * 255);            SDL_RenderSetScale(renderer, 1, 1);            while (SDL_PollEvent(&event)) {                if (event.type == SDL_QUIT)                    return EEEE;                if (event.type == SDL_KEYDOWN) {                    if (event.key.keysym.sym == SDLK_ESCAPE) {                        return 0;                    }                    if (event.key.keysym.sym == SDLK_UP) {                        if (!f)                            choose--;                        f = 1;                    }                    if (event.key.keysym.sym == SDLK_DOWN) {                        if (!f)                            choose++;                        f = 1;                    }                    if (choose < 0)                        choose += 4;                    choose %= 4;                    if (event.key.keysym.sym == SDLK_RETURN) {                        if (choose % 4 == 0) {                            return 0;                        } else if (choose % 4 == 1) {                            return new_game;                        } else if (choose % 4 == 2) {                            save();                            return 0;                        } else if (choose % 4 == 3)                            return EEEE;                    }                } else if (event.type == SDL_KEYUP) {                    if (event.key.keysym.sym == SDLK_UP || event.key.keysym.sym == SDLK_DOWN)                        f = 0;                }            }            SDL_RenderPresent(renderer);            while (SDL_GetTicks() - start_ticks < 1000 / 20);        }    }}void m_b_temp(int ind) {    int i, j = ind;    for (i = 0; i < 500; i++) {        if (bal_temp[i].time <= 0) {            bal_temp[i].time = ball_life_time;            bal_temp[i].x = extt[j].x + (tank_rad + 10) * cos(extt[j].ang);            bal_temp[i].y = extt[j].y + (tank_rad + 10) * sin(extt[j].ang);            bal_temp[i].angle = extt[j].ang;            bal_temp[i].collor = rand() % 255 + (rand() % 255) * 1000 + (rand() % 255) * 1000000;            break;        }    }}void move_b_temp(int i) {    bal_temp[i].x += cos(bal_temp[i].angle);    bal_temp[i].y += sin(bal_temp[i].angle);    if (bal_temp[i].x < -100) {        U_D(&bal_temp[i].angle);        bal_temp[i].x += 2;    }    if (bal_temp[i].x > 900) {        U_D(&bal_temp[i].angle);        bal_temp[i].x -= 2;    }    if (bal_temp[i].y > 900) {        R_L(&bal_temp[i].angle);        bal_temp[i].y -= 2;    }    if (bal_temp[i].y < -100) {        R_L(&bal_temp[i].angle);        bal_temp[i].y += 2;    }}int stage;int init_handle_event() {    SDL_Event event;    while (SDL_PollEvent(&event)) {        if (event.type == SDL_QUIT)            return EEEE;        if (event.type == SDL_KEYDOWN) {            if (stage == 0) {                if (event.key.keysym.sym == SDLK_RETURN) {                    stage++;                    return 0;                }                if (event.key.keysym.sym == SDLK_UP) {                    if (!f)                        end_score++;                    f = 1;                }                if (event.key.keysym.sym == SDLK_DOWN) {                    if (!f)                        end_score--;                    f = 1;                }                if (event.key.keysym.sym == SDLK_RIGHT) {                    if (!f)                        end_score += 10;                    f = 1;                }                if (event.key.keysym.sym == SDLK_LEFT) {                    if (!f)                        end_score -= 10;                    f = 1;                }                while (end_score <= 2)                    end_score++;            }            if (stage == 1) {                if (event.key.keysym.sym == SDLK_RETURN) {                    return 11;                }                if (t_n == 0 && !tank1[0].ex) {                    tank1[0].shot = event.key.keysym.sym;                    t_n++;                    return 3;                }                if (t_n == 1 && !tank1[1].ex && tank1[0].shot != event.key.keysym.sym) {                    tank1[1].shot = event.key.keysym.sym;                    t_n++;                    return 1;                }                if (t_n == 2 && tank1[0].shot != event.key.keysym.sym && tank1[1].shot != event.key.keysym.sym) {                    tank1[2].shot = event.key.keysym.sym;                    t_n++;                    return 2;                }                for (int i = 0; i < t_n; ++i) {                    if (event.key.keysym.sym == tank1[i].shot && tank1[i].ex) {                        if (!f) {                            m_b_temp(i);                            f = 1;                        }                    }                }            }        } else if (event.type == SDL_KEYUP) {            f = 0;        }    }}int set_key() {    while (1) {        int start_ticks = SDL_GetTicks();        times = (sin(start_ticks)) * (sin(start_ticks));        SDL_SetRenderDrawColor(renderer, 0, 0, 0, 255);        SDL_RenderClear(renderer);        SDL_RenderSetScale(renderer, 2, 2);        char temp[50];        stringRGBA(renderer, 10, 150 / 2, "Go Forward", 255, 255, 255, (row == 0) * 255 * times + (row != 0) * 255);        stringRGBA(renderer, 10, 250 / 2, "Go Backward", 255, 255, 255, (row == 1) * 255 * times + (row != 1) * 255);        stringRGBA(renderer, 10, 350 / 2, "Turn Right", 255, 255, 255, (row == 2) * 255 * times + (row != 2) * 255);        stringRGBA(renderer, 10, 450 / 2, "Turn Left", 255, 255, 255, (row == 3) * 255 * times + (row != 3) * 255);        stringRGBA(renderer, 10, 550 / 2, "shoot", 255, 255, 255, (row == 4) * 255 * times + (row != 4) * 255);        stringRGBA(renderer, 200, 650 / 2, "select a key", 255, 255, 255, (row == 5) * 255 * times + (row != 5) * 255);        for (int k = 0; k < 3; ++k) {            if (tank1[k].shot == ' ')sprintf(temp, "Space");            else if (tank1[k].shot == SDLK_RIGHT) sprintf(temp, "Right");            else if (tank1[k].shot == SDLK_LEFT) sprintf(temp, "Left");            else if (tank1[k].shot == SDLK_UP) sprintf(temp, "Up");            else if (tank1[k].shot == SDLK_DOWN) sprintf(temp, "Down");            else if (tank1[k].shot == SDLK_KP_0)sprintf(temp, "0");            else if (tank1[k].shot == SDLK_KP_1)sprintf(temp, "1");            else if (tank1[k].shot == SDLK_KP_2)sprintf(temp, "2");            else if (tank1[k].shot == SDLK_KP_3)sprintf(temp, "3");            else if (tank1[k].shot == SDLK_KP_4)sprintf(temp, "4");            else if (tank1[k].shot == SDLK_KP_5)sprintf(temp, "5");            else if (tank1[k].shot == SDLK_KP_6)sprintf(temp, "6");            else if (tank1[k].shot == SDLK_KP_7)sprintf(temp, "7");            else if (tank1[k].shot == SDLK_KP_8)sprintf(temp, "8");            else if (tank1[k].shot == SDLK_KP_9)sprintf(temp, "9");            else sprintf(temp, "%c", tank1[k].shot);            stringRGBA(renderer, (320 + 200 * k) / 2, 550 / 2, temp, 255, 255, 255, ((tank1[k].shot >= 1) * 150 + 100) * ((row != 4) || (col != k)) + ((row == 4) && (col == k)) * 255 * times);            if (tank1[k].U == ' ')sprintf(temp, "Space");            else if (tank1[k].U == SDLK_RIGHT) sprintf(temp, "Right");            else if (tank1[k].U == SDLK_LEFT) sprintf(temp, "Left");            else if (tank1[k].U == SDLK_UP) sprintf(temp, "Up");            else if (tank1[k].U == SDLK_DOWN) sprintf(temp, "Down");            else if (tank1[k].U == SDLK_KP_0)sprintf(temp, "0");            else if (tank1[k].U == SDLK_KP_1)sprintf(temp, "1");            else if (tank1[k].U == SDLK_KP_2)sprintf(temp, "2");            else if (tank1[k].U == SDLK_KP_3)sprintf(temp, "3");            else if (tank1[k].U == SDLK_KP_4)sprintf(temp, "4");            else if (tank1[k].U == SDLK_KP_5)sprintf(temp, "5");            else if (tank1[k].U == SDLK_KP_6)sprintf(temp, "6");            else if (tank1[k].U == SDLK_KP_7)sprintf(temp, "7");            else if (tank1[k].U == SDLK_KP_8)sprintf(temp, "8");            else if (tank1[k].U == SDLK_KP_9)sprintf(temp, "9");            else sprintf(temp, "%c", tank1[k].U);            stringRGBA(renderer, (320 + 200 * k) / 2, 150 / 2, temp, 255, 255, 255, ((tank1[k].shot >= 1) * 150 + 100) * ((row != 0) || (col != k)) + ((row == 0) && (col == k)) * 255 * times);            if (tank1[k].D == ' ')sprintf(temp, "Space");            else if (tank1[k].D == SDLK_RIGHT) sprintf(temp, "Right");            else if (tank1[k].D == SDLK_LEFT) sprintf(temp, "Left");            else if (tank1[k].D == SDLK_UP) sprintf(temp, "Up");            else if (tank1[k].D == SDLK_DOWN) sprintf(temp, "Down");            else if (tank1[k].D == SDLK_KP_0)sprintf(temp, "0");            else if (tank1[k].D == SDLK_KP_1)sprintf(temp, "1");            else if (tank1[k].D == SDLK_KP_2)sprintf(temp, "2");            else if (tank1[k].D == SDLK_KP_3)sprintf(temp, "3");            else if (tank1[k].D == SDLK_KP_4)sprintf(temp, "4");            else if (tank1[k].D == SDLK_KP_5)sprintf(temp, "5");            else if (tank1[k].D == SDLK_KP_6)sprintf(temp, "6");            else if (tank1[k].D == SDLK_KP_7)sprintf(temp, "7");            else if (tank1[k].D == SDLK_KP_8)sprintf(temp, "8");            else if (tank1[k].D == SDLK_KP_9)sprintf(temp, "9");            else sprintf(temp, "%c", tank1[k].D);            stringRGBA(renderer, (320 + 200 * k) / 2, 250 / 2, temp, 255, 255, 255, ((tank1[k].shot >= 1) * 150 + 100) * ((row != 1) || (col != k)) + ((row == 1) && (col == k)) * 255 * times);            if (tank1[k].R == ' ')sprintf(temp, "Space");            else if (tank1[k].R == SDLK_RIGHT) sprintf(temp, "Right");            else if (tank1[k].R == SDLK_LEFT) sprintf(temp, "Left");            else if (tank1[k].R == SDLK_UP) sprintf(temp, "Up");            else if (tank1[k].R == SDLK_DOWN) sprintf(temp, "Down");            else if (tank1[k].R == SDLK_KP_0)sprintf(temp, "0");            else if (tank1[k].R == SDLK_KP_1)sprintf(temp, "1");            else if (tank1[k].R == SDLK_KP_2)sprintf(temp, "2");            else if (tank1[k].R == SDLK_KP_3)sprintf(temp, "3");            else if (tank1[k].R == SDLK_KP_4)sprintf(temp, "4");            else if (tank1[k].R == SDLK_KP_5)sprintf(temp, "5");            else if (tank1[k].R == SDLK_KP_6)sprintf(temp, "6");            else if (tank1[k].R == SDLK_KP_7)sprintf(temp, "7");            else if (tank1[k].R == SDLK_KP_8)sprintf(temp, "8");            else if (tank1[k].R == SDLK_KP_9)sprintf(temp, "9");            else sprintf(temp, "%c", tank1[k].R);            stringRGBA(renderer, (320 + 200 * k) / 2, 350 / 2, temp, 255, 255, 255, ((tank1[k].shot >= 1) * 150 + 100) * ((row != 2) || (col != k)) + ((row == 2) && (col == k)) * 255 * times);            if (tank1[k].L == ' ')sprintf(temp, "Space");            else if (tank1[k].L == SDLK_RIGHT) sprintf(temp, "Right");            else if (tank1[k].L == SDLK_LEFT) sprintf(temp, "Left");            else if (tank1[k].L == SDLK_UP) sprintf(temp, "Up");            else if (tank1[k].L == SDLK_DOWN) sprintf(temp, "Down");            else if (tank1[k].L == SDLK_KP_0)sprintf(temp, "0");            else if (tank1[k].L == SDLK_KP_1)sprintf(temp, "1");            else if (tank1[k].L == SDLK_KP_2)sprintf(temp, "2");            else if (tank1[k].L == SDLK_KP_3)sprintf(temp, "3");            else if (tank1[k].L == SDLK_KP_4)sprintf(temp, "4");            else if (tank1[k].L == SDLK_KP_5)sprintf(temp, "5");            else if (tank1[k].L == SDLK_KP_6)sprintf(temp, "6");            else if (tank1[k].L == SDLK_KP_7)sprintf(temp, "7");            else if (tank1[k].L == SDLK_KP_8)sprintf(temp, "8");            else if (tank1[k].L == SDLK_KP_9)sprintf(temp, "9");            else sprintf(temp, "%c", tank1[k].L);            stringRGBA(renderer, (320 + 200 * k) / 2, 450 / 2, temp, 255, 255, 255, ((tank1[k].shot >= 1) * 150 + 100) * ((row != 3) || (col != k)) + ((row == 3) && (col == k)) * 255 * times);        }        SDL_RenderSetScale(renderer, 1, 1);        thickLineRGBA(renderer, 270, 50, 470, 50, 100, tank1[0].r, tank1[0].g, tank1[0].b, 255 * (col != 0) + (col == 0) * 255 * times);        thickLineRGBA(renderer, 470, 50, 670, 50, 100, tank1[1].r, tank1[1].g, tank1[1].b, 255 * (col != 1) + (col == 1) * 255 * times);        if (tank1[2].shot)            thickLineRGBA(renderer, 670, 50, 870, 50, 100, tank1[2].r, tank1[2].g, tank1[2].b, 255 * (col != 2) + (col == 2) * 255 * times);        thickLineRGBA(renderer, 270, 10, 270, 590, 2, 255, 255, 255, 100);        thickLineRGBA(renderer, 470, 10, 470, 590, 2, 255, 255, 255, 100);        thickLineRGBA(renderer, 670, 10, 670, 590, 2, 255, 255, 255, 100);        thickLineRGBA(renderer, 10, 300, 990, 300, 2, 255, 255, 255, 100);        thickLineRGBA(renderer, 10, 500, 990, 500, 2, 255, 255, 255, 100);        thickLineRGBA(renderer, 10, 100, 990, 100, 2, 255, 255, 255, 100);        thickLineRGBA(renderer, 10, 400, 990, 400, 2, 255, 255, 255, 100);        thickLineRGBA(renderer, 10, 200, 990, 200, 2, 255, 255, 255, 100);        SDL_Event event;        while (SDL_PollEvent(&event)) {            if (event.type == SDL_QUIT)                return 1234;            if (event.type == SDL_KEYDOWN) {                if (event.key.keysym.sym != SDLK_RETURN)                    return event.key.keysym.sym;            }        }        SDL_RenderPresent(renderer);        while (SDL_GetTicks() - start_ticks < 1000 / 20);    }}int init_new_game() {    stage = 0;    end_score = 10;    SDL_SetWindowSize(window, 1000, 1000);    t_n = 0;    bal_temp = malloc(5000 * sizeof(bullet));    srand(time(NULL));    extt[0].x = rand() % 1000 - 100;    extt[1].x = rand() % 1000 - 100;    extt[0].y = rand() % 1000 - 100;    extt[1].y = rand() % 1000 - 100;    extt[0].ang = (rand() / 1000);    extt[1].ang = (rand() / 1000);    extt[0].r = extt[0].g = extt[0].b = 255;    extt[0].rgbs = 255255255;    extt[1].rgbs = 255255255;    extt[1].r = extt[1].b = extt[1].g = 255;    extt[0].ex = 0;    extt[1].ex = 0;    tank1[0].shot = tank1[1].shot = tank1[2].shot = 0;    strcpy(tank1[0].name, "green");    strcpy(tank1[1].name, "blue");    strcpy(tank1[2].name, "red");    int x_min;    double angle_dir[2];    int i = 0, j = 0, mv = 1;    angle_dir[0] = angle_dir[1] = 1;    while (1) {        int start_ticks = SDL_GetTicks();        if (mv) {            x_min = (extt[0].y - extt[1].y) * (extt[0].y - extt[1].y) + (extt[0].x - extt[1].x) * (extt[0].x - extt[1].x);            if (x_min < 1500) {                extt[0].x = rand() % 1000 - 100;                extt[1].x = rand() % 1000 - 100;                extt[0].y = rand() % 1000 - 100;                extt[1].y = rand() % 1000 - 100;                extt[0].ang = (rand() / 1000);                extt[1].ang = (rand() / 1000);            }            extt[0].y += 0.5 * sin(extt[0].ang);            extt[0].x += 0.5 * cos(extt[0].ang);            if ((extt[0].y - extt[1].y) * (extt[0].y - extt[1].y) + (extt[0].x - extt[1].x) * (extt[0].x - extt[1].x) > x_min) {                if (i < 5) {                    angle_dir[0] = -angle_dir[0];                    i = 50;                }                extt[0].y -= sin(extt[0].ang);                extt[0].x -= cos(extt[0].ang);            }            i--;            x_min = (extt[0].y - extt[1].y) * (extt[0].y - extt[1].y) + (extt[0].x - extt[1].x) * (extt[0].x - extt[1].x);            extt[0].ang += angle_dir[0] / 100;            extt[1].x += 0.5 * cos(extt[1].ang);            extt[1].y += 0.5 * sin(extt[1].ang);            if ((extt[0].y - extt[1].y) * (extt[0].y - extt[1].y) + (extt[0].x - extt[1].x) * (extt[0].x - extt[1].x) > x_min) {                if (j < 5) {                    angle_dir[1] = -angle_dir[1];                    j = 50;                }                extt[1].y -= sin(extt[1].ang);                extt[1].x -= cos(extt[1].ang);            }            j--;            extt[1].ang += angle_dir[1] / 90;        }        h = 1;        SDL_SetRenderDrawColor(renderer, rang, rang, rang, 255);        SDL_RenderClear(renderer);        int handle = init_handle_event();        if (handle == EEEE)            return EEEE;        if (handle == 3 || t_n == 3) {            tank1[0].ex = 1;            tank1[0].r = 0;            tank1[0].g = 254;            tank1[0].b = 12;            if (!extt[0].ex) {                extt[0].ex = 3;                extt[0].r = tank1[0].r;                extt[0].g = tank1[0].g;                extt[0].b = tank1[0].b;            } else if (!extt[1].ex) {                extt[1].ex = 3;                extt[1].r = tank1[0].r;                extt[1].g = tank1[0].g;                extt[1].b = tank1[0].b;            }        }        if (handle == 1 || t_n == 3) {            tank1[1].ex = 1;            tank1[1].r = 0;            tank1[1].g = 25;            tank1[1].b = 255;            if (!extt[0].ex) {                extt[0].ex = 1;                extt[0].r = tank1[1].r;                extt[0].g = tank1[1].g;                extt[0].b = tank1[1].b;            } else if (!extt[1].ex) {                extt[1].ex = 1;                extt[1].r = tank1[1].r;                extt[1].g = tank1[1].g;                extt[1].b = tank1[1].b;            }        }        if (handle == 2 || t_n == 3) {            tank1[2].ex = 1;            tank1[2].r = 255;            tank1[2].g = 0;            tank1[2].b = 12;            if (!extt[0].ex) {                extt[0].ex = 2;                extt[0].r = tank1[2].r;                extt[0].g = tank1[2].g;                extt[0].b = tank1[2].b;            } else if (!extt[1].ex) {                extt[1].ex = 2;                extt[1].r = tank1[2].r;                extt[1].g = tank1[2].g;                extt[1].b = tank1[2].b;            }        }        empty = 0;        if (handle == 11 && t_n >= 2) {            empty = 1;            break;        }        if (t_n == 3) {            break;        }        if (new_game_from_load) {            stringRGBA(renderer, 100, 145, "you dont have ", (t_n == 2) * 255 + (t_n == 1) * 40 + (t_n == 0) * 40, (t_n == 0) * 255 + (t_n == 1) * 40 + (t_n == 2) * 40, (t_n == 1) * 255 + (t_n == 0) * 40 + (t_n == 2) * 40, 255);        }        SDL_RenderSetScale(renderer, 1.0, 1.0);        thickLineRGBA(renderer, extt[0].x + box_width, extt[0].y + box_width, extt[0].x + (tank_rad + 10) * (cos(extt[0].ang)) + box_width, extt[0].y + (tank_rad + 10) * sin(extt[0].ang) + box_width, 7, rang + h * extt[0].rgbs % 1000, rang + h * (extt[0].rgbs / 1000) % 1000, rang + h * (extt[0].rgbs / 1000000) % 1000000, 255);        filledCircleRGBA(renderer, extt[0].x + box_width, extt[0].y + box_width, tank_rad, extt[0].r, extt[0].g, extt[0].b, 255);        thickLineRGBA(renderer, extt[1].x + box_width, extt[1].y + box_width, extt[1].x + (tank_rad + 10) * (cos(extt[1].ang)) + box_width, extt[1].y + (tank_rad + 10) * sin(extt[1].ang) + box_width, 7, rang + h * extt[1].rgbs % 1000, rang + h * (extt[1].rgbs / 1000) % 1000, rang + h * (extt[1].rgbs / 1000000) % 1000000, 255);        filledCircleRGBA(renderer, extt[1].x + box_width, extt[1].y + box_width, tank_rad, extt[1].r, extt[1].g, extt[1].b, 255);        for (i = 0; i < 5000; i++) {            if (bal_temp[i].time > 0) {                filledCircleRGBA(renderer, box_width + bal_temp[i].x, box_width + bal_temp[i].y, 5, bal_temp[i].collor % 1000, (bal_temp[i].collor / 1000) % 1000, (bal_temp[i].collor / 1000000) % 1000000, 255);                move_b_temp(i);            }        }        char buf[100];        SDL_RenderSetScale(renderer, 2, 2);        stringRGBA(renderer, rand() % 2 + 160, rand() % 2 + 100, "welcome to my AlterTank", rand() % 255, rand() % 255, rand() % 255, 255);        if (stage == 1) {            char a[4][10] = {"Grean", "Blue", "Red"};            sprintf(buf, "press a key to set %s tank's shot key", a[t_n]);            stringRGBA(renderer, 100, 125, buf, (t_n == 2) * 255 + (t_n == 1) * 40 + (t_n == 0) * 40, (t_n == 0) * 255 + (t_n == 1) * 40 + (t_n == 2) * 40, (t_n == 1) * 255 + (t_n == 0) * 40 + (t_n == 2) * 40, 255);            if (t_n == 2) {                stringRGBA(renderer, 100, 140, "or press \"return\" to play 2 player mood", 255, 255, 255, 255);            }        } else if (stage == 0) {            sprintf(buf, "choose finall score: %d", end_score);            stringRGBA(renderer, 100, 140, buf, 255, 255, 255, 255);        }        SDL_RenderPresent(renderer);        while (SDL_GetTicks() - start_ticks < 1000 / FPS);    }    free(bal_temp);    SDL_SetWindowSize(window, 670 + (!empty) * 200, 700);    while (1) {        int start_ticks = SDL_GetTicks();        times = (sin(start_ticks)) * (sin(start_ticks));        SDL_SetRenderDrawColor(renderer, 0, 0, 0, 255);        SDL_RenderClear(renderer);        SDL_RenderSetScale(renderer, 2, 2);        char temp[50];        stringRGBA(renderer, 10, 150 / 2, "Go Forward", 255, 255, 255, (row == 0) * 255 * times + (row != 0) * 255);        stringRGBA(renderer, 10, 250 / 2, "Go Backward", 255, 255, 255, (row == 1) * 255 * times + (row != 1) * 255);        stringRGBA(renderer, 10, 350 / 2, "Turn Right", 255, 255, 255, (row == 2) * 255 * times + (row != 2) * 255);        stringRGBA(renderer, 10, 450 / 2, "Turn Left", 255, 255, 255, (row == 3) * 255 * times + (row != 3) * 255);        stringRGBA(renderer, 10, 550 / 2, "shoot", 255, 255, 255, (row == 4) * 255 * times + (row != 4) * 255);        stringRGBA(renderer, 200, 650 / 2, "confirm", 255, 255, 255, (row == 5) * 255 * times + (row != 5) * 255);        for (int k = 0; k < 3 - empty; ++k) {            if (tank1[k].shot == ' ')sprintf(temp, "Space");            else if (tank1[k].shot == SDLK_RIGHT) sprintf(temp, "Right");            else if (tank1[k].shot == SDLK_LEFT) sprintf(temp, "Left");            else if (tank1[k].shot == SDLK_UP) sprintf(temp, "Up");            else if (tank1[k].shot == SDLK_DOWN) sprintf(temp, "Down");            else if (tank1[k].shot == SDLK_KP_0)sprintf(temp, "0");            else if (tank1[k].shot == SDLK_KP_1)sprintf(temp, "1");            else if (tank1[k].shot == SDLK_KP_2)sprintf(temp, "2");            else if (tank1[k].shot == SDLK_KP_3)sprintf(temp, "3");            else if (tank1[k].shot == SDLK_KP_4)sprintf(temp, "4");            else if (tank1[k].shot == SDLK_KP_5)sprintf(temp, "5");            else if (tank1[k].shot == SDLK_KP_6)sprintf(temp, "6");            else if (tank1[k].shot == SDLK_KP_7)sprintf(temp, "7");            else if (tank1[k].shot == SDLK_KP_8)sprintf(temp, "8");            else if (tank1[k].shot == SDLK_KP_9)sprintf(temp, "9");            else sprintf(temp, "%c", tank1[k].shot);            stringRGBA(renderer, (320 + 200 * k) / 2, 550 / 2, temp, 255, 255, 255, ((tank1[k].shot >= 1) * 150 + 100) * ((row != 4) || (col != k)) + ((row == 4) && (col == k)) * 255 * times);            if (tank1[k].U == ' ')sprintf(temp, "Space");            else if (tank1[k].U == SDLK_RIGHT) sprintf(temp, "Right");            else if (tank1[k].U == SDLK_LEFT) sprintf(temp, "Left");            else if (tank1[k].U == SDLK_UP) sprintf(temp, "Up");            else if (tank1[k].U == SDLK_DOWN) sprintf(temp, "Down");            else if (tank1[k].U == SDLK_KP_0)sprintf(temp, "0");            else if (tank1[k].U == SDLK_KP_1)sprintf(temp, "1");            else if (tank1[k].U == SDLK_KP_2)sprintf(temp, "2");            else if (tank1[k].U == SDLK_KP_3)sprintf(temp, "3");            else if (tank1[k].U == SDLK_KP_4)sprintf(temp, "4");            else if (tank1[k].U == SDLK_KP_5)sprintf(temp, "5");            else if (tank1[k].U == SDLK_KP_6)sprintf(temp, "6");            else if (tank1[k].U == SDLK_KP_7)sprintf(temp, "7");            else if (tank1[k].U == SDLK_KP_8)sprintf(temp, "8");            else if (tank1[k].U == SDLK_KP_9)sprintf(temp, "9");            else sprintf(temp, "%c", tank1[k].U);            stringRGBA(renderer, (320 + 200 * k) / 2, 150 / 2, temp, 255, 255, 255, ((tank1[k].shot >= 1) * 150 + 100) * ((row != 0) || (col != k)) + ((row == 0) && (col == k)) * 255 * times);            if (tank1[k].D == ' ')sprintf(temp, "Space");            else if (tank1[k].D == SDLK_RIGHT) sprintf(temp, "Right");            else if (tank1[k].D == SDLK_LEFT) sprintf(temp, "Left");            else if (tank1[k].D == SDLK_UP) sprintf(temp, "Up");            else if (tank1[k].D == SDLK_DOWN) sprintf(temp, "Down");            else if (tank1[k].D == SDLK_KP_0)sprintf(temp, "0");            else if (tank1[k].D == SDLK_KP_1)sprintf(temp, "1");            else if (tank1[k].D == SDLK_KP_2)sprintf(temp, "2");            else if (tank1[k].D == SDLK_KP_3)sprintf(temp, "3");            else if (tank1[k].D == SDLK_KP_4)sprintf(temp, "4");            else if (tank1[k].D == SDLK_KP_5)sprintf(temp, "5");            else if (tank1[k].D == SDLK_KP_6)sprintf(temp, "6");            else if (tank1[k].D == SDLK_KP_7)sprintf(temp, "7");            else if (tank1[k].D == SDLK_KP_8)sprintf(temp, "8");            else if (tank1[k].D == SDLK_KP_9)sprintf(temp, "9");            else sprintf(temp, "%c", tank1[k].D);            stringRGBA(renderer, (320 + 200 * k) / 2, 250 / 2, temp, 255, 255, 255, ((tank1[k].shot >= 1) * 150 + 100) * ((row != 1) || (col != k)) + ((row == 1) && (col == k)) * 255 * times);            if (tank1[k].R == ' ')sprintf(temp, "Space");            else if (tank1[k].R == SDLK_RIGHT) sprintf(temp, "Right");            else if (tank1[k].R == SDLK_LEFT) sprintf(temp, "Left");            else if (tank1[k].R == SDLK_UP) sprintf(temp, "Up");            else if (tank1[k].R == SDLK_DOWN) sprintf(temp, "Down");            else if (tank1[k].R == SDLK_KP_0)sprintf(temp, "0");            else if (tank1[k].R == SDLK_KP_1)sprintf(temp, "1");            else if (tank1[k].R == SDLK_KP_2)sprintf(temp, "2");            else if (tank1[k].R == SDLK_KP_3)sprintf(temp, "3");            else if (tank1[k].R == SDLK_KP_4)sprintf(temp, "4");            else if (tank1[k].R == SDLK_KP_5)sprintf(temp, "5");            else if (tank1[k].R == SDLK_KP_6)sprintf(temp, "6");            else if (tank1[k].R == SDLK_KP_7)sprintf(temp, "7");            else if (tank1[k].R == SDLK_KP_8)sprintf(temp, "8");            else if (tank1[k].R == SDLK_KP_9)sprintf(temp, "9");            else sprintf(temp, "%c", tank1[k].R);            stringRGBA(renderer, (320 + 200 * k) / 2, 350 / 2, temp, 255, 255, 255, ((tank1[k].shot >= 1) * 150 + 100) * ((row != 2) || (col != k)) + ((row == 2) && (col == k)) * 255 * times);            if (tank1[k].L == ' ')sprintf(temp, "Space");            else if (tank1[k].L == SDLK_RIGHT) sprintf(temp, "Right");            else if (tank1[k].L == SDLK_LEFT) sprintf(temp, "Left");            else if (tank1[k].L == SDLK_UP) sprintf(temp, "Up");            else if (tank1[k].L == SDLK_DOWN) sprintf(temp, "Down");            else if (tank1[k].L == SDLK_KP_0)sprintf(temp, "0");            else if (tank1[k].L == SDLK_KP_1)sprintf(temp, "1");            else if (tank1[k].L == SDLK_KP_2)sprintf(temp, "2");            else if (tank1[k].L == SDLK_KP_3)sprintf(temp, "3");            else if (tank1[k].L == SDLK_KP_4)sprintf(temp, "4");            else if (tank1[k].L == SDLK_KP_5)sprintf(temp, "5");            else if (tank1[k].L == SDLK_KP_6)sprintf(temp, "6");            else if (tank1[k].L == SDLK_KP_7)sprintf(temp, "7");            else if (tank1[k].L == SDLK_KP_8)sprintf(temp, "8");            else if (tank1[k].L == SDLK_KP_9)sprintf(temp, "9");            else sprintf(temp, "%c", tank1[k].L);            stringRGBA(renderer, (320 + 200 * k) / 2, 450 / 2, temp, 255, 255, 255, ((tank1[k].shot >= 1) * 150 + 100) * ((row != 3) || (col != k)) + ((row == 3) && (col == k)) * 255 * times);        }        SDL_RenderSetScale(renderer, 1, 1);        thickLineRGBA(renderer, 270, 50, 470, 50, 100, tank1[0].r, tank1[0].g, tank1[0].b, 255 * (col != 0) + (col == 0) * 255 * times);        thickLineRGBA(renderer, 470, 50, 670, 50, 100, tank1[1].r, tank1[1].g, tank1[1].b, 255 * (col != 1) + (col == 1) * 255 * times);        if (!empty)            thickLineRGBA(renderer, 670, 50, 870, 50, 100, tank1[2].r, tank1[2].g, tank1[2].b, 255 * (col != 2) + (col == 2) * 255 * times);        thickLineRGBA(renderer, 270, 10, 270, 590, 2, 255, 255, 255, 100);        thickLineRGBA(renderer, 470, 10, 470, 590, 2, 255, 255, 255, 100);        thickLineRGBA(renderer, 670, 10, 670, 590, 2, 255, 255, 255, 100);        thickLineRGBA(renderer, 10, 300, 990, 300, 2, 255, 255, 255, 100);        thickLineRGBA(renderer, 10, 500, 990, 500, 2, 255, 255, 255, 100);        thickLineRGBA(renderer, 10, 100, 990, 100, 2, 255, 255, 255, 100);        thickLineRGBA(renderer, 10, 400, 990, 400, 2, 255, 255, 255, 100);        thickLineRGBA(renderer, 10, 200, 990, 200, 2, 255, 255, 255, 100);        SDL_Event event;        while (SDL_PollEvent(&event)) {            if (event.type == SDL_QUIT)                return 1234;            if (event.type == SDL_KEYDOWN) {                if (event.key.keysym.sym == SDLK_UP) {                    if (!f)                        row--;                    f = 1;                }                if (event.key.keysym.sym == SDLK_DOWN) {                    if (!f)                        row++;                    f = 1;                }                if (event.key.keysym.sym == SDLK_RIGHT) {                    if (!f)                        col++;                    f = 1;                }                if (event.key.keysym.sym == SDLK_LEFT) {                    if (!f)                        col--;                    f = 1;                }                if (row < 0)                    row += 6;                row %= 6;                if (col < 0)                    col += 3 - empty;                col %= (3 - empty);                if (event.key.keysym.sym == SDLK_RETURN) {                    int kwy;                    if (row == 5)                        return 0;                    else {                        kwy = set_key();                        if (kwy == EEEE)                            return EEEE;                    }                    if (row == 0)                        tank1[col].U = kwy;                    if (row == 1)                        tank1[col].D = kwy;                    if (row == 2)                        tank1[col].R = kwy;                    if (row == 3)                        tank1[col].L = kwy;                    if (row == 4)                        tank1[col].shot = kwy;                }            } else if (event.type == SDL_KEYUP) {                if (event.key.keysym.sym == SDLK_UP || event.key.keysym.sym == SDLK_DOWN || event.key.keysym.sym == SDLK_LEFT || event.key.keysym.sym == SDLK_RIGHT)                    f = 0;            }        }        SDL_RenderPresent(renderer);        while (SDL_GetTicks() - start_ticks < 1000 / 20);    }}void save() {    FILE *s = fopen("../src/s", "a");    fprintf(s, "%d %d %d %d ", S_y, S_x, end_score, empty);    for (int i = 0; i < 11; i++) {        for (int j = 0; j < 11; j++) {            fprintf(s, "%d ", wal_h[i][j]);        }    }    for (int i = 0; i < 11; i++) {        for (int j = 0; j < 11; j++) {            fprintf(s, "%d ", wal_v[i][j]);        }    }    for (int l = 0; l < ball_num * tank_num; ++l) {        fprintf(s, "%lf %lf %lf %lf %d %d ", ball[l].time, ball[l].x, ball[l].y, ball[l].angle, ball[l].t, ball[l].collor);    }    for (int k = 0; k < tank_num; ++k) {        fprintf(s, "%lf %lf %lf %d %d %d %d %d %d %d %d %d ", tank1[k].x, tank1[k].y, tank1[k].ang, tank1[k].score, tank1[k].bal_limit, tank1[k].ex, tank1[k].alive, tank1[k].shot, tank1[k].U, tank1[k].D, tank1[k].R, tank1[k].L);    }    fprintf(s, "%lf %lf %lf %lf %d %d %d %lf %d", x_laser, y_laser, laser.x, laser.y, laser.mood, laser.time, alive_tank, time_mordan_baghie, h);    fprintf(s, "\n");    fclose(s);}void read_file(int k) {    h = 1;    tank1[2].ex = tank1[2].alive = 0;    wall_color = 130130130;    FILE *s = fopen("../src/s", "r");    char line[10000];    int num = 0;    while (num != k) {        num++;        if (num == k) {            fscanf(s, "%d %d %d %d ", &S_y, &S_x, &end_score, &empty);            t_n = tank_num - empty;            for (int i = 0; i < 11; i++) {                for (int j = 0; j < 11; j++) {                    fscanf(s, "%d ", &wal_h[i][j]);                }            }            for (int i = 0; i < 11; i++) {                for (int j = 0; j < 11; j++) {                    fscanf(s, "%d ", &wal_v[i][j]);                }            }            for (int l = 0; l < 15; ++l) {                fscanf(s, "%lf %lf %lf %lf %d %d ", &ball[l].time, &ball[l].x, &ball[l].y, &ball[l].angle, &ball[l].t, &ball[l].collor);            }            for (int x = 0; x < tank_num; ++x) {                fscanf(s, "%lf %lf %lf %d %d %d %d %d %d %d %d %d ", &tank1[x].x, &tank1[x].y, &tank1[x].ang, &tank1[x].score, &tank1[x].bal_limit, &tank1[x].ex, &tank1[x].alive, &tank1[x].shot, &tank1[x].U, &tank1[x].D, &tank1[x].R, &tank1[x].L);            }            fscanf(s, "%lf %lf %lf %lf %d %d %d %lf %d", &x_laser, &y_laser, &laser.x, &laser.y, &laser.mood, &laser.time, &alive_tank, &time_mordan_baghie, &h);            break;        }        fgets(line, 10000, s);    }    fclose(s);    SDL_SetWindowSize(window, S_Width + 2 * box_width, S_Height + 2 * box_width);}int load() {    int choose = 1;    FILE *s = fopen("../src/s", "r");    char line[10100];    saved_n = 0;    while (1) {//chanta save dashtim ta alan        int num = 0;        fscanf(s, "%d", &num);        if (num) {            fgets(line, 10000, s);        } else {            break;        }        saved_n++;    }    fclose(s);    if (saved_n == 0) {        new_game_from_load = 1;        return init_new_game();    }    read_file(1);    while (1) {        int start_ticks = SDL_GetTicks();        times = (sin(start_ticks)) * (sin(start_ticks));        draw();        char buf[50];        sprintf(buf, "0:%lf", tank1[0].ang);        stringRGBA(renderer, 10, 30, buf, 255, 255, 255, 255);        sprintf(buf, "1:%lf", tank1[1].ang);        stringRGBA(renderer, 10, 50, buf, 255, 255, 255, 255);        sprintf(buf, "2:%lf", tank1[2].ang);        stringRGBA(renderer, 10, 70, buf, 255, 255, 255, 255);        sprintf(buf, "%d of %d", choose, saved_n);        stringRGBA(renderer, 10, 10, buf, 255, 255, 255, 255);        SDL_Event event;        while (SDL_PollEvent(&event)) {            if (event.type == SDL_QUIT)                return EEEE;            if (event.type == SDL_KEYDOWN) {                if (event.key.keysym.sym == SDLK_UP) {                    if (!f) {                        choose++;                        read_file(choose);                    }                    f = 1;                }                if (event.key.keysym.sym == SDLK_DOWN) {                    if (!f) {                        choose--;                        read_file(choose);                    }                    f = 1;                }                choose = choose % saved_n;                if (choose <= 0)                    choose += saved_n;                if (event.key.keysym.sym == SDLK_RETURN) {                    return 1;                }            } else if (event.type == SDL_KEYUP) {                if (event.key.keysym.sym == SDLK_UP || event.key.keysym.sym == SDLK_DOWN)                    f = 0;            }        }        SDL_RenderPresent(renderer);        while (SDL_GetTicks() - start_ticks < 1000 / 20);    }}int init() {    int choose = 0;    double times;    bool f;    for (int i = 0; i < 11; ++i) {        for (int j = 0; j < 11; ++j) {            wal_v[i][j] = 0;            wal_h[i][j] = 0;        }    }    for (int k = 0; k < 3; ++k) {        tank1[k].x = 0;        tank1[k].y = 0;        tank1[k].ang = 0;        tank1[k].bal_limit = 0;        tank1[k].ex = 0;        tank1[k].alive = 0;        tank1[k].score = 0;        tank1[k].shot = 0;    }    tank1[0].D = SDLK_DOWN;    tank1[0].U = SDLK_UP;    tank1[0].L = SDLK_LEFT;    tank1[0].R = SDLK_RIGHT;    tank1[1].D = SDLK_d;    tank1[1].U = SDLK_e;    tank1[1].L = SDLK_s;    tank1[1].R = SDLK_f;    tank1[2].D = SDLK_KP_5;    tank1[2].U = SDLK_KP_8;    tank1[2].L = SDLK_KP_4;    tank1[2].R = SDLK_KP_6;    strcpy(tank1[0].name, "green");    strcpy(tank1[1].name, "blue");    strcpy(tank1[2].name, "red");    tank1[0].rgbs = 255255255;    tank1[2].rgbs = 255255255;    tank1[1].rgbs = 255255255;    tank1[0].r = 0;    tank1[0].g = 254;    tank1[0].b = 12;    tank1[1].r = 0;    tank1[1].g = 25;    tank1[1].b = 255;    tank1[2].r = 255;    tank1[2].g = 0;    tank1[2].b = 12;    for (int l = 0; l < ball_num * tank_num; ++l) {        ball[l].time = 0;    }    SDL_SetWindowSize(window, 300, 300);    SDL_RenderSetScale(renderer, 2, 2);    while (1) {        int start_ticks = SDL_GetTicks();        times = (sin(start_ticks)) * (sin(start_ticks));        SDL_SetRenderDrawColor(renderer, 0, 0, 0, 255);        SDL_RenderClear(renderer);        stringRGBA(renderer, 10, 60, "New Game", (choose != 0) * 255 + (choose == 0) * (122), 255, (choose != 0) * 255 + (choose == 0) * (times * 132 + 122), (choose != 0) * 255 + (choose == 0) * times * 255);        stringRGBA(renderer, 10, 20, "AtomTank!", 255, 255, 255, 255);        stringRGBA(renderer, 10, 80, "Load Game", (choose != 1) * 255 + (choose == 1) * (122), 255, (choose != 1) * 255 + (choose == 1) * (times * 132 + 122), (choose != 1) * 255 + (choose == 1) * times * 255);        stringRGBA(renderer, 10, 100, "exit", (choose != 2) * 255 + (choose == 2) * (122), 255, (choose != 2) * 255 + (choose == 2) * (times * 132 + 122), (choose != 2) * 255 + (choose == 2) * times * 255);        SDL_Event event;        while (SDL_PollEvent(&event)) {            if (event.type == SDL_QUIT)                return EEEE;            if (event.type == SDL_KEYDOWN) {                if (event.key.keysym.sym == SDLK_UP) {                    if (!f)                        choose--;                    f = 1;                }                if (event.key.keysym.sym == SDLK_DOWN) {                    if (!f)                        choose++;                    f = 1;                }                if (choose < 0)                    choose += 3;                choose %= 3;                if (event.key.keysym.sym == SDLK_RETURN) {                    if (choose % 3 == 0) {                        new_game_from_load = 0;                        load_game = 0;                        if (init_new_game() == EEEE)                            return EEEE;                        return 0;                    } else if (choose % 3 == 1) {                        load_game = 1;                        return load();                    } else if (choose % 3 == 2)                        return EEEE;                }            } else if (event.type == SDL_KEYUP) {                if (event.key.keysym.sym == SDLK_UP || event.key.keysym.sym == SDLK_DOWN)                    f = 0;            }        }        SDL_RenderPresent(renderer);        while (SDL_GetTicks() - start_ticks < 1000 / 20);    }}